parameters:
- name: win_ps
  displayName: Windows PowerShell Version
  type: string
  default: 5.1.14
- name: ps7
  displayName: PowerShell 7.0.x Version
  type: string
  default: 7.0.8
- name: ps7_1
  displayName: PowerShell 7.1.x Version
  type: string
  default: 7.1.5
- name: ps7_2
  displayName: PowerShell 7.2.x Version
  type: string
  default: 7.2.0
- name: latest_ps
  displayName: PowerShell Latest Version
  type: string
  default: latest
- winAgentPoolName: pool-windows-2019
- winAgentPoolVMImage: ''
- linuxAgentPoolName: pool-ubuntu-2004
- linuxAgentPoolVMImage: ''
- macOsAgentPoolName: Azure Pipelines
- macOsAgentPoolVMImage: macOS-11

pr: none
trigger: none

jobs:
- template: util/smoke-test-steps.yml
  parameters:
    name: 'Win_PS5_1_14_SmokeTest'
    agentPoolName: ${{ parameters.winAgentPoolName }}''
    agentPoolVMImage: ${{ parameters.winAgentPoolVMImage }}
    psVersion: ${{ parameters.win_ps }}

- template: util/smoke-test-steps.yml
  parameters:
    name: 'Win_PS7_0_X_SmokeTest'
    agentPoolName: ${{ parameters.winAgentPoolName }}''
    agentPoolVMImage: ${{ parameters.winAgentPoolVMImage }}
    psVersion: ${{ parameters.ps7 }}

- template: util/smoke-test-steps.yml
  parameters:
    name: 'Win_PS7_1_X_SmokeTest'
    agentPoolName: ${{ parameters.winAgentPoolName }}''
    agentPoolVMImage: ${{ parameters.winAgentPoolVMImage }}
    psVersion: ${{ parameters.ps7_1 }}

- template: util/smoke-test-steps.yml
  parameters:
    name: 'Win_PS7_2_X_SmokeTest'
    agentPoolName: ${{ parameters.winAgentPoolName }}''
    agentPoolVMImage: ${{ parameters.winAgentPoolVMImage }}
    psVersion: ${{ parameters.ps7_2 }}

- template: util/smoke-test-steps.yml
  parameters:
    name: 'Win_Latest_PS_SmokeTest'
    agentPoolName: ${{ parameters.winAgentPoolName }}''
    agentPoolVMImage: ${{ parameters.winAgentPoolVMImage }}
    psVersion: ${{ parameters.latest_ps }}

- template: util/smoke-test-steps.yml
  parameters:
    name: 'Linux_PS7_0_X_SmokeTest'
    agentPoolName: ${{ parameters.linuxAgentPoolName }}''
    agentPoolVMImage: ${{ parameters.linuxAgentPoolVMImage }}
    psVersion: ${{ parameters.ps7 }}

- template: util/smoke-test-steps.yml
  parameters:
    name: 'Linux_PS7_1_X_SmokeTest'
    agentPoolName: ${{ parameters.linuxAgentPoolName }}''
    agentPoolVMImage: ${{ parameters.linuxAgentPoolVMImage }}
    psVersion: ${{ parameters.ps7_1 }}

- template: util/smoke-test-steps.yml
  parameters:
    name: 'Linux_PS7_2_X_SmokeTest'
    agentPoolName: ${{ parameters.linuxAgentPoolName }}''
    agentPoolVMImage: ${{ parameters.linuxAgentPoolVMImage }}
    psVersion: ${{ parameters.ps7_2 }}

- template: util/smoke-test-steps.yml
  parameters:
    name: 'Linux_Latest_PS_SmokeTest'
    agentPoolName: ${{ parameters.linuxAgentPoolName }}''
    agentPoolVMImage: ${{ parameters.linuxAgentPoolVMImage }}
    psVersion: ${{ parameters.latest_ps }}

- template: util/smoke-test-steps.yml
  parameters:
    name: 'MacOS_PS7_2_X_SmokeTest'
    agentPoolName: ${{ parameters.macOsAgentPoolName }}''
    agentPoolVMImage: ${{ parameters.macOsAgentPoolVMImage }}
    psVersion: ${{ parameters.ps7_2 }}

- template: util/smoke-test-steps.yml
  parameters:
    name: 'MacOS_Latest_PS_SmokeTest'
    agentPoolName: ${{ parameters.macOsAgentPoolName }}''
    agentPoolVMImage: ${{ parameters.macOsAgentPoolVMImage }}
    psVersion: ${{ parameters.latest_ps }}
