# import the module downloaded above
. .\cmpclass.ps1

# Compare the SDK models generated by autorest.csharp and autorest.powershell
$diffList = compareModel -csModelPath C:\Users\v-yuchenli\Desktop\Generated.Csharp\Models\ -psModelPath .\Generated\Models\

# List all the models used in auto-mapper
$usedmodels = listUsedModels -mapFile D:\HDI-Repo\azure-powershell\src\HDInsight\HDInsight\Models\Management\AzureHDInsightOsProfile.cs

# Get the models that need to be handled in auto-mapper.
# The second column in the csv file contains the public members that are in the model generated by autorest.csharp but have a different name in the model generated by autorest.powershell, which mean you will need to do that mapping manually in auto-mapper.
$final = @{}
foreach($item in $usedModels) {if (-not ($diffList[$item] -eq $null)) {$final[$item] = $diffList[$item]}}
$final.GetEnumerator() | ForEach-Object { [PSCustomObject]@{ Key = $_.Key; Value = $_.Value } } | Export-Csv -Path ./test.csv -NoTypeInformation
