{
  "resourceType": "service/apiCollections",
  "apiVersion": "2023-11-15",
  "learnMore": {
    "url": "https://learn.microsoft.com/powershell/module/az.security"
  },
  "commands": [
    {
      "name": "Get-AzSecurityApiCollection",
      "description": "Gets an Azure API Management API if it has been onboarded to Microsoft Defender for APIs.\nIf an Azure API Management API is onboarded to Microsoft Defender for APIs, the system will monitor the operations within the Azure API Management API for intrusive behaviors and provide alerts for attacks that have been detected.",
      "path": "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ApiManagement/service/{serviceName}/providers/Microsoft.Security/apiCollections/{apiId}",
      "help": {
        "learnMore": {
          "url": "https://learn.microsoft.com/powershell/module/az.security/get-azsecurityapicollection"
        },
        "parameterSets": [
          {
            "parameters": [
              "-ApiId <String>",
              "-ResourceGroupName <String>",
              "-ServiceName <String>",
              "[-SubscriptionId <String[]>]"
            ]
          }
        ]
      },
      "examples": [
        {
          "description": "Gets an Azure API Management API if it has been onboarded to Microsoft Defender for APIs. If an Azure API Management API is onboarded to Microsoft Defender for APIs, the system will monitor the operations within the Azure API Management API for intrusive behaviors and provide alerts for attacks that have been detected.",
          "parameters": [
            {
              "name": "-ApiId",
              "value": "[Path.apiId]"
            },
            {
              "name": "-ResourceGroupName",
              "value": "[Path.resourceGroupName]"
            },
            {
              "name": "-ServiceName",
              "value": "[Path.serviceName]"
            },
            {
              "name": "-SubscriptionId",
              "value": "[Path.subscriptionId]"
            }
          ]
        }
      ]
    },
    {
      "name": "Invoke-AzSecurityApiCollectionApimOffboard",
      "description": "Offboard an Azure API Management API from Microsoft Defender for APIs.\nThe system will stop monitoring the operations within the Azure API Management API for intrusive behaviors.",
      "path": "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ApiManagement/service/{serviceName}/providers/Microsoft.Security/apiCollections/{apiId}",
      "help": {
        "learnMore": {
          "url": "https://learn.microsoft.com/powershell/module/az.security/invoke-azsecurityapicollectionapimoffboard"
        },
        "parameterSets": [
          {
            "parameters": [
              "-ApiId <String>",
              "-ResourceGroupName <String>",
              "-ServiceName <String>",
              "[-SubscriptionId <String>]"
            ]
          }
        ]
      },
      "examples": [
        {
          "description": "Offboard an Azure API Management API from Microsoft Defender for APIs. The system will stop monitoring the operations within the Azure API Management API for intrusive behaviors.",
          "parameters": [
            {
              "name": "-ApiId",
              "value": "[Path.apiId]"
            },
            {
              "name": "-ResourceGroupName",
              "value": "[Path.resourceGroupName]"
            },
            {
              "name": "-ServiceName",
              "value": "[Path.serviceName]"
            },
            {
              "name": "-SubscriptionId",
              "value": "[Path.subscriptionId]"
            }
          ]
        }
      ]
    },
    {
      "name": "Invoke-AzSecurityApiCollectionApimOnboard",
      "description": "Onboard an Azure API Management API to Microsoft Defender for APIs.\nThe system will start monitoring the operations within the Azure Management API for intrusive behaviors and provide alerts for attacks that have been detected.",
      "path": "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ApiManagement/service/{serviceName}/providers/Microsoft.Security/apiCollections/{apiId}",
      "help": {
        "learnMore": {
          "url": "https://learn.microsoft.com/powershell/module/az.security/invoke-azsecurityapicollectionapimonboard"
        },
        "parameterSets": [
          {
            "parameters": [
              "-ApiId <String>",
              "-ResourceGroupName <String>",
              "-ServiceName <String>",
              "[-SubscriptionId <String>]"
            ]
          }
        ]
      },
      "examples": [
        {
          "description": "Onboard an Azure API Management API to Microsoft Defender for APIs. The system will start monitoring the operations within the Azure Management API for intrusive behaviors and provide alerts for attacks that have been detected.",
          "parameters": [
            {
              "name": "-ApiId",
              "value": "[Path.apiId]"
            },
            {
              "name": "-ResourceGroupName",
              "value": "[Path.resourceGroupName]"
            },
            {
              "name": "-ServiceName",
              "value": "[Path.serviceName]"
            },
            {
              "name": "-SubscriptionId",
              "value": "[Path.subscriptionId]"
            }
          ]
        }
      ]
    }
  ]
}
